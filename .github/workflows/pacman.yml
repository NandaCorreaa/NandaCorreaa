name: Pac-Man Turbinado

on:
  push:
    branches: [ "main" ]

jobs:
  generate-svg:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Generate Pac-Man SVG
        run: |
          mkdir -p output

          cat << 'EOF' > output/pacman.svg
<svg xmlns="http://www.w3.org/2000/svg" width="400" height="150" viewBox="0 0 400 150">

  <!-- Fundo Labirinto -->
  <rect width="100%" height="100%" fill="#000033"/>

  <!-- Pontos coloridos -->
  <circle cx="120" cy="75" r="5" fill="yellow">
    <animate attributeName="cx" from="120" to="50" dur="2s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="1;0" dur="2s" repeatCount="indefinite"/>
  </circle>
  <circle cx="160" cy="75" r="5" fill="lime">
    <animate attributeName="cx" from="160" to="50" dur="2.5s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="1;0" dur="2.5s" repeatCount="indefinite"/>
  </circle>
  <circle cx="200" cy="75" r="5" fill="pink">
    <animate attributeName="cx" from="200" to="50" dur="3s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="1;0" dur="3s" repeatCount="indefinite"/>
  </circle>

  <!-- Pac-Man -->
  <circle cx="50" cy="75" r="30" fill="#FFD700">
    <animateTransform
      attributeName="transform"
      type="rotate"
      from="0 50 75"
      to="-45 50 75"
      dur="0.3s"
      repeatCount="indefinite" />
  </circle>
  <polygon points="50,75 80,60 80,90" fill="black">
    <animateTransform
      attributeName="transform"
      type="rotate"
      from="0 50 75"
      to="-45 50 75"
      dur="0.3s"
      repeatCount="indefinite" />
  </polygon>

  <!-- Fantasmas -->
  <circle cx="350" cy="50" r="20" fill="red">
    <animate attributeName="cx" from="350" to="100" dur="4s" repeatCount="indefinite"/>
  </circle>
  <circle cx="370" cy="100" r="20" fill="cyan">
    <animate attributeName="cx" from="370" to="120" dur="5s" repeatCount="indefinite"/>
  </circle>
  <circle cx="390" cy="75" r="20" fill="pink">
    <animate attributeName="cx" from="390" to="140" dur="6s" repeatCount="indefinite"/>
  </circle>

</svg>
EOF

      - name: Commit Pac-Man SVG
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "github-actions@github.com"
          git add output/pacman.svg
          git commit -m "Update Pac-Man Turbinado" || echo "No changes"
          git push
